@import "tailwindcss";
@plugin "@tailwindcss/typography";

@custom-variant dark (&:where(.dark, .dark *));

@source "../../../../themes/ecwu-theme/layouts";
@source "../../../../content/post";

@theme {
    --color-ecwu-blue: #0052D9;
    
    /* Font family configuration */
    --font-family-serif: et-book, Bembo, Palatino, "Palatino Linotype", "Palatino LT STD", "Book Antiqua", Georgia, serif;
}

@utility bg-stripes {
    background-image: linear-gradient(45deg, var(--stripes-color) 12.50%, transparent 12.50%, transparent 50%, var(--stripes-color) 50%, var(--stripes-color) 62.50%, transparent 62.50%, transparent 100%);
    background-size: 5.66px 5.66px;
}

@layer base {
    /* Base link styles - lower specificity, will be overridden by prose */
    a {
        font-weight: 700;
        &:hover {
            background-color: theme(colors.blue.900);
            color: white;
        }
        &:visited {
            color: theme(colors.zinc.400);
        }
    }

    :where(.dark, .dark *) {
        a {
            &:hover {
                color: white;
            }
            &:visited {
                color: theme(colors.slate.600);
            }
        }
    }
    
    /* Prose link styles - higher specificity to override typography plugin */
    article.prose a {
        font-weight: 700;
        &:hover {
            background-color: theme(colors.blue.900);
            color: white;
        }
        &:visited {
            color: theme(colors.zinc.400);
        }
    }

    :where(.dark, .dark *) {
        article.prose a {
            &:hover {
                color: white;
            }
            &:visited {
                color: theme(colors.slate.600);
            }
        }
    }

    body {
        padding-left: 12.5%;
        margin-right: 1.25rem;
    }

    :where(.dark, .dark *) {
        body {
            background-color: theme(colors.zinc.900);
        }
    }

    .nav-title {
        margin-top: 1.5rem;
        margin-bottom: 1.5rem;
        font-weight: 700;
        font-size: 3.75rem;
        line-height: 1;
    }

    h1 {
        margin-top: 1.5rem;
        margin-bottom: 1.5rem;
        font-weight: 700;
        font-size: 3.75rem;
        line-height: 1;
    }
    
    h2 {
        font-style: italic;
        margin-top: 1.5rem;
        margin-bottom: 1.5rem;
        font-weight: 500;
        font-size: 2.25rem;
        line-height: 2.5rem;
    }

    .w-content {
        max-width: 90%;
        @media (min-width: 768px) {
            max-width: 55%;
        }
    }

    article {
        font-family: var(--font-family-serif);
        margin-top: 2.5rem;
        margin-bottom: 2.5rem;
        max-width: 90% !important;
        
        @media (min-width: 768px) {
            max-width: 55% !important;
        }
    }

    .gallery {
        height: 40%;
        overflow-x: visible;
    }

    hr {
        border-color: inherit;
    }

    :where(.dark, .dark *) {
        hr {
            border-color: theme(colors.gray.700);
        }
    }

    tr:nth-child(odd):not(article *) {
        background-color: theme(colors.gray.50);
    }

    :where(.dark, .dark *) {
        tr:nth-child(odd):not(article *) {
            background-color: theme(colors.slate.800);
        }
    }

    .text-primary {
        color: theme(colors.gray.900);
        
        &:hover {
            color: theme(colors.gray.900);
        }
        
        &:visited {
            color: theme(colors.gray.900);
        }
    }

    :where(.dark, .dark *) {
        .text-primary {
            color: theme(colors.gray.200);
            
            &:hover {
                color: theme(colors.gray.200);
            }
            
            &:visited {
                color: theme(colors.gray.200);
            }
        }
    }
    
    /* Typography plugin code styling - needs higher specificity to override prose */
    article.prose code:not(pre *),
    article.prose code:not(pre code) {
        background-color: rgb(243 244 246) !important;
        color: rgb(190 18 60) !important;
        font-weight: 400 !important;
        border-radius: 0.25rem !important;
        padding: 0.1rem 0.25rem !important;
        
        &::before,
        &::after {
            content: none !important;
        }
    }
    
    :where(.dark, .dark *) {
        article.prose code:not(pre *),
        article.prose code:not(pre code) {
            background-color: rgb(31 41 55) !important;
            color: rgb(190 18 60) !important;
        }
    }
    
    /* Typography plugin blockquote styling */
    article.prose blockquote p:first-of-type::before,
    article.prose blockquote p:last-of-type::after {
        content: none !important;
    }

    /* Typography plugin list styling */
    article.prose li {
        line-height: 1.4 !important;
    }
}
